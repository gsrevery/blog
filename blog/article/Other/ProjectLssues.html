<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>项目上的问题 | gp&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="学而时习之不亦说乎，有朋至远方来不亦乐乎。">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e32d6808.css" as="style"><link rel="preload" href="/blog/assets/js/app.beaadab2.js" as="script"><link rel="preload" href="/blog/assets/js/2.cdb3e9a2.js" as="script"><link rel="preload" href="/blog/assets/js/1.2ff590fb.js" as="script"><link rel="preload" href="/blog/assets/js/17.48fb250a.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.483ed099.js"><link rel="prefetch" href="/blog/assets/js/11.4a83636f.js"><link rel="prefetch" href="/blog/assets/js/12.1c3abd53.js"><link rel="prefetch" href="/blog/assets/js/13.42ddc870.js"><link rel="prefetch" href="/blog/assets/js/14.4ab77d03.js"><link rel="prefetch" href="/blog/assets/js/15.1ca1ecee.js"><link rel="prefetch" href="/blog/assets/js/16.089477cb.js"><link rel="prefetch" href="/blog/assets/js/18.a5449b25.js"><link rel="prefetch" href="/blog/assets/js/19.f488d48b.js"><link rel="prefetch" href="/blog/assets/js/20.693a86cb.js"><link rel="prefetch" href="/blog/assets/js/21.ffab7a62.js"><link rel="prefetch" href="/blog/assets/js/22.1e2f1643.js"><link rel="prefetch" href="/blog/assets/js/23.06d01b81.js"><link rel="prefetch" href="/blog/assets/js/24.6fb74fdf.js"><link rel="prefetch" href="/blog/assets/js/25.f4f1deed.js"><link rel="prefetch" href="/blog/assets/js/26.be249a87.js"><link rel="prefetch" href="/blog/assets/js/27.516e31ca.js"><link rel="prefetch" href="/blog/assets/js/28.7c715b92.js"><link rel="prefetch" href="/blog/assets/js/29.a1a35c6e.js"><link rel="prefetch" href="/blog/assets/js/3.7baf3ae3.js"><link rel="prefetch" href="/blog/assets/js/30.d59ad473.js"><link rel="prefetch" href="/blog/assets/js/31.aa0f20f9.js"><link rel="prefetch" href="/blog/assets/js/32.18d21a8e.js"><link rel="prefetch" href="/blog/assets/js/33.855b107e.js"><link rel="prefetch" href="/blog/assets/js/34.bea82fc6.js"><link rel="prefetch" href="/blog/assets/js/35.a101de36.js"><link rel="prefetch" href="/blog/assets/js/36.3181bbf8.js"><link rel="prefetch" href="/blog/assets/js/37.a5c4a273.js"><link rel="prefetch" href="/blog/assets/js/38.7f4eac1e.js"><link rel="prefetch" href="/blog/assets/js/39.678e3035.js"><link rel="prefetch" href="/blog/assets/js/4.85886a19.js"><link rel="prefetch" href="/blog/assets/js/40.a1fcf64d.js"><link rel="prefetch" href="/blog/assets/js/41.5dde4d53.js"><link rel="prefetch" href="/blog/assets/js/42.f5234e1d.js"><link rel="prefetch" href="/blog/assets/js/43.c4e43685.js"><link rel="prefetch" href="/blog/assets/js/44.872f54a9.js"><link rel="prefetch" href="/blog/assets/js/45.29af2dc5.js"><link rel="prefetch" href="/blog/assets/js/46.d22a77c8.js"><link rel="prefetch" href="/blog/assets/js/47.9e4dbf95.js"><link rel="prefetch" href="/blog/assets/js/48.6261cc4a.js"><link rel="prefetch" href="/blog/assets/js/49.6f327d72.js"><link rel="prefetch" href="/blog/assets/js/5.af9fe709.js"><link rel="prefetch" href="/blog/assets/js/50.96b9043b.js"><link rel="prefetch" href="/blog/assets/js/51.5eab7b9a.js"><link rel="prefetch" href="/blog/assets/js/52.ae57d346.js"><link rel="prefetch" href="/blog/assets/js/53.316eac3b.js"><link rel="prefetch" href="/blog/assets/js/54.7d7fca5e.js"><link rel="prefetch" href="/blog/assets/js/55.cf1cbef6.js"><link rel="prefetch" href="/blog/assets/js/56.41bd9c2b.js"><link rel="prefetch" href="/blog/assets/js/57.bd21fd3e.js"><link rel="prefetch" href="/blog/assets/js/58.0ce65d28.js"><link rel="prefetch" href="/blog/assets/js/59.fb113ba6.js"><link rel="prefetch" href="/blog/assets/js/6.d412c1fb.js"><link rel="prefetch" href="/blog/assets/js/60.99acc0e4.js"><link rel="prefetch" href="/blog/assets/js/61.e738459f.js"><link rel="prefetch" href="/blog/assets/js/62.5ad34de9.js"><link rel="prefetch" href="/blog/assets/js/63.202cabe8.js"><link rel="prefetch" href="/blog/assets/js/64.da206e9a.js"><link rel="prefetch" href="/blog/assets/js/65.51e46eb2.js"><link rel="prefetch" href="/blog/assets/js/66.1bac0bf6.js"><link rel="prefetch" href="/blog/assets/js/67.ede4622d.js"><link rel="prefetch" href="/blog/assets/js/68.13599b23.js"><link rel="prefetch" href="/blog/assets/js/7.5b939fe6.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.be90ab07.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e32d6808.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">gp's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/article/JavaScript/Rule.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/blog/AboutMe.html" class="nav-link">
  Resume
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/article/JavaScript/Rule.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/blog/AboutMe.html" class="nav-link">
  Resume
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/JavaScript/Optimization.html" class="sidebar-link">优化</a></li><li><a href="/blog/article/JavaScript/Rule.html" class="sidebar-link">代码规范</a></li><li><a href="/blog/article/JavaScript/QA-daily.html" class="sidebar-link">练习题目</a></li><li><a href="/blog/article/JavaScript/Object.html" class="sidebar-link">对象</a></li><li><a href="/blog/article/JavaScript/Array.html" class="sidebar-link">数组</a></li><li><a href="/blog/article/JavaScript/Function.html" class="sidebar-link">函数</a></li><li><a href="/blog/article/JavaScript/Ram.html" class="sidebar-link">内存</a></li><li><a href="/blog/article/JavaScript/Method.html" class="sidebar-link">常用方法</a></li><li><a href="/blog/article/JavaScript/PublicFunction.html" class="sidebar-link">公共方法</a></li><li><a href="/blog/article/JavaScript/Robustness.html" class="sidebar-link">代码健壮性</a></li><li><a href="/blog/article/JavaScript/Tree.html" class="sidebar-link">树</a></li><li><a href="/blog/article/JavaScript/This.html" class="sidebar-link">this指向</a></li><li><a href="/blog/article/JavaScript/Css.html" class="sidebar-link">不常见的但实用的css</a></li><li><a href="/blog/article/JavaScript/EventLoop.html" class="sidebar-link">事件循环机制</a></li><li><a href="/blog/article/JavaScript/CrossDomain.html" class="sidebar-link">跨域</a></li><li><a href="/blog/article/JavaScript/Bubble.html" class="sidebar-link">冒泡</a></li><li><a href="/blog/article/JavaScript/CommonlyMethod.html" class="sidebar-link">数据特殊处理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Vue/Components.html" class="sidebar-link">组件</a></li><li><a href="/blog/article/Vue/CrossDomain.html" class="sidebar-link">跨域</a></li><li><a href="/blog/article/Vue/Reconstruction.html" class="sidebar-link">项目重构优化</a></li><li><a href="/blog/article/Vue/Question.html" class="sidebar-link">vue问题</a></li><li><a href="/blog/article/Vue/Router.html" class="sidebar-link">路由</a></li><li><a href="/blog/article/Vue/Table.html" class="sidebar-link">表格</a></li><li><a href="/blog/article/Vue/SpecialPage.html" class="sidebar-link">页面</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>App</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/APP/UniApp.html" class="sidebar-link">uni-app</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Other</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Other/Git.html" class="sidebar-link">git操作</a></li><li><a href="/blog/article/Other/LODOP.html" class="sidebar-link">lodop插件</a></li><li><a href="/blog/article/Other/Npm.html" class="sidebar-link">npm私有库</a></li><li><a href="/blog/article/Other/Interview.html" class="sidebar-link">问题总结</a></li><li><a href="/blog/article/Other/ProjectLssues.html" aria-current="page" class="active sidebar-link">运行项目问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#node版本与node-sass版本兼容" class="sidebar-link">node版本与node-sass版本兼容</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#热更新太慢" class="sidebar-link">热更新太慢</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#内存溢出" class="sidebar-link">内存溢出</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#项目安装依赖时候常见问题以及解决思路" class="sidebar-link">项目安装依赖时候常见问题以及解决思路</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#由于国内外环境因素-导致npm包下载不完整或者出错中断" class="sidebar-link">由于国内外环境因素，导致npm包下载不完整或者出错中断</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#由于node版本和node-sass版本不匹配导致出错中断" class="sidebar-link">由于node版本和node.sass版本不匹配导致出错中断</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#项目其他人安装依赖都正常-到你安装依赖时出错" class="sidebar-link">项目其他人安装依赖都正常，到你安装依赖时出错</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#error-commander-11-1-0-the-engine-node-is-incompatible-with-this-module" class="sidebar-link">error commander@11.1.0: The engine &quot;node&quot; is incompatible with this module</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#网站测试环境首页加载正常-发布到线上加载很慢或者加载不出首页" class="sidebar-link">网站测试环境首页加载正常，发布到线上加载很慢或者加载不出首页</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#研发中node-modules依赖包越来越大" class="sidebar-link">研发中node_modules依赖包越来越大</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#方案一-修改配置-让cache不做累计" class="sidebar-link">方案一：修改配置-让cache不做累计</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#方案二-修改配置-启动项目时删除cache" class="sidebar-link">方案二：修改配置-启动项目时删除cache</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#方案三-切换管理工具" class="sidebar-link">方案三：切换管理工具</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#https访问http资源出错" class="sidebar-link">https访问http资源出错</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#_1-通过nginx代理" class="sidebar-link">1.通过nginx代理</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#_2-将访问出错的资源-放在本地。" class="sidebar-link">2.将访问出错的资源，放在本地。</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#接口访问带上路由" class="sidebar-link">接口访问带上路由</a></li><li class="sidebar-sub-header"><a href="/blog/article/Other/ProjectLssues.html#aes加密解密" class="sidebar-link">AES加密解密</a></li></ul></li><li><a href="/blog/article/Other/OnlinePayment.html" class="sidebar-link">在线支付</a></li><li><a href="/blog/article/Other/PluginUnit.html" class="sidebar-link">js常用的各种插件</a></li><li><a href="/blog/article/Other/Vscode.html" class="sidebar-link">vscode常用插件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Three</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Three/Overview.html" class="sidebar-link">Three概览</a></li><li><a href="/blog/article/Three/Optimize.html" class="sidebar-link">Three性能优化</a></li><li><a href="/blog/article/Three/IntelligentPackingFunction.html" class="sidebar-link">Three常见问题及解决方案</a></li><li><a href="/blog/article/Three/Cannon.html" class="sidebar-link">Cannon物理引擎</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="项目上的问题"><a href="#项目上的问题" class="header-anchor">#</a> 项目上的问题</h1> <h2 id="node版本与node-sass版本兼容"><a href="#node版本与node-sass版本兼容" class="header-anchor">#</a> node版本与node-sass版本兼容</h2> <p>在接手老项目，运行项目时，或者安装node-sass时报如下错误，就是版本兼容问题</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Syntax Error: Error: Node Sass does not yet support your current environment: Windows 64-bit with Unsupported runtime (93)
For more information on which environments are supported please see:     
https://github.com/sass/node-sass/releases/tag/v4.14.1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>以下为node版本与sass版本对应关系图
<img src="/blog/assets/img/projectLssues-node.4a82ad78.jpg" style="height:100%;width:100%;"> <strong>解决方案:</strong> 安装对应版本的node或者node-sass</p> <h2 id="热更新太慢"><a href="#热更新太慢" class="header-anchor">#</a> 热更新太慢</h2> <p>vue项目在修改代码后热更新太慢解决方案可以从以下两点试试</p> <ol><li>改变路由懒加载方式</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">require</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'@/pages/back-stage/payment/Index.vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span>
<span class="token comment">// 改为下面这种方式</span>
<span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token string">'@/pages/back-stage/payment/Index.vue'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>安装babel-plugin-dynamic-import-node插件</li></ol> <ul><li>先安装插件 <code>yarn add babel-plugin-dynamic-import-node</code></li> <li>在<code>babel.config.js</code>中添加插件</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;development&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;dynamic-import-node&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>或者在<code>.babelrc</code>文件中添加 <code>(官方推荐)</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;dynamic-import-node&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>可选项<code>noInterop</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 如果为true 则不会互换 require 调用。 有用的是避免使用require（'module'）。默认在 commonjs 模块上。开发环境通过 babel 将异步 import() 转化为同步 require() 来增加热更新速度，生产环境继续使用 webpack 的import 机制。</span>
<span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;dynamic-import-node&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&quot;noInterop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="内存溢出"><a href="#内存溢出" class="header-anchor">#</a> 内存溢出</h2> <p>在热更新的时候可能会碰到内存突然溢出的问题，原因是因为在编译大型项目 webpack 占用内存如果超出了V8引擎对Node默认的内存限制大小时，(64位系统：1.4 GB，32位系统：0.7 GB)，就会产生内存溢出的错误。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">-</span> Last few GCs <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>
 
<span class="token punctuation">[</span><span class="token number">13872</span><span class="token operator">:</span>000001BAF69758E0<span class="token punctuation">]</span>   <span class="token number">606058</span> <span class="token literal-property property">ms</span><span class="token operator">:</span> Mark<span class="token operator">-</span>sweep <span class="token number">1227.9</span> <span class="token punctuation">(</span><span class="token number">1294.4</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1225.3</span> <span class="token punctuation">(</span><span class="token number">1292.1</span><span class="token punctuation">)</span> <span class="token constant">MB</span><span class="token punctuation">,</span> <span class="token number">387.1</span> <span class="token operator">/</span> <span class="token number">0.1</span> <span class="token function">ms</span>  <span class="token punctuation">(</span>average mu <span class="token operator">=</span> <span class="token number">0.936</span><span class="token punctuation">,</span> current mu <span class="token operator">=</span> <span class="token number">0.000</span><span class="token punctuation">)</span> last resort <span class="token constant">GC</span> <span class="token keyword">in</span> old space requested
<span class="token punctuation">[</span><span class="token number">13872</span><span class="token operator">:</span>000001BAF69758E0<span class="token punctuation">]</span>   <span class="token number">606389</span> <span class="token literal-property property">ms</span><span class="token operator">:</span> Mark<span class="token operator">-</span>sweep <span class="token number">1225.3</span> <span class="token punctuation">(</span><span class="token number">1292.1</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1225.3</span> <span class="token punctuation">(</span><span class="token number">1291.6</span><span class="token punctuation">)</span> <span class="token constant">MB</span><span class="token punctuation">,</span> <span class="token number">330.6</span> <span class="token operator">/</span> <span class="token number">0.0</span> <span class="token function">ms</span>  <span class="token punctuation">(</span>average mu <span class="token operator">=</span> <span class="token number">0.881</span><span class="token punctuation">,</span> current mu <span class="token operator">=</span> <span class="token number">0.000</span><span class="token punctuation">)</span> last resort <span class="token constant">GC</span> <span class="token keyword">in</span> old space requested
 
 
<span class="token operator">&lt;</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token constant">JS</span> stacktrace <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>
 
<span class="token operator">===</span><span class="token operator">=</span> <span class="token constant">JS</span> stack trace <span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">==</span>
 
    <span class="token number">0</span><span class="token operator">:</span> ExitFrame <span class="token punctuation">[</span>pc<span class="token operator">:</span> 0000011C9175C5C1<span class="token punctuation">]</span>
Security context<span class="token operator">:</span> <span class="token number">0x01546879e6e9</span> <span class="token operator">&lt;</span>JSObject<span class="token operator">&gt;</span>
    <span class="token number">1</span><span class="token operator">:</span> <span class="token function">byteLength</span><span class="token punctuation">(</span>aka byteLength<span class="token punctuation">)</span> <span class="token punctuation">[</span>00000079857F9241<span class="token punctuation">]</span> <span class="token punctuation">[</span>buffer<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">531</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>bytecode<span class="token operator">=</span>00000160110414F1 offset<span class="token operator">=</span><span class="token number">204</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">=</span><span class="token number">0x02bf2c6826f1</span> <span class="token operator">&lt;</span><span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>string<span class="token operator">=</span><span class="token number">0x032765d66511</span> <span class="token operator">&lt;</span>Very long string<span class="token punctuation">[</span><span class="token number">84025566</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token number">0x0154687be2e1</span> <span class="token operator">&lt;</span>String<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">:</span> utf8<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token number">2</span><span class="token operator">:</span> arguments adaptor frame<span class="token operator">:</span> <span class="token number">3</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token number">2</span>
    <span class="token number">3</span><span class="token operator">:</span> <span class="token function">fromString</span><span class="token punctuation">(</span>aka fromString<span class="token punctuation">)</span> <span class="token punctuation">[</span>0000018FF1D13251<span class="token punctuation">]</span> <span class="token punctuation">[</span>buffer<span class="token punctuation">.</span>js<span class="token operator">:</span><span class="token number">342</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>bytecode<span class="token operator">=</span><span class="token number">00000160.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 
<span class="token constant">FATAL</span> <span class="token constant">ERROR</span><span class="token operator">:</span> <span class="token constant">CALL_AND_RETRY_LAST</span> Allocation failed <span class="token operator">-</span> JavaScript heap out <span class="token keyword">of</span> memory
 <span class="token number">1</span><span class="token operator">:</span> 00007FF7B0E1C6AA v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>GCIdleTimeHandler<span class="token operator">:</span><span class="token operator">:</span>GCIdleTimeHandler<span class="token operator">+</span><span class="token number">4506</span>
 <span class="token number">2</span><span class="token operator">:</span> 00007FF7B0DF7416 node<span class="token operator">:</span><span class="token operator">:</span>MakeCallback<span class="token operator">+</span><span class="token number">4534</span>
 <span class="token number">3</span><span class="token operator">:</span> 00007FF7B0DF7D90 node_module_register<span class="token operator">+</span><span class="token number">2032</span>
 <span class="token number">4</span><span class="token operator">:</span> 00007FF7B111189E v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>FatalProcessOutOfMemory<span class="token operator">+</span><span class="token number">846</span>
 <span class="token number">5</span><span class="token operator">:</span> 00007FF7B11117CF v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>FatalProcessOutOfMemory<span class="token operator">+</span><span class="token number">639</span>
 <span class="token number">6</span><span class="token operator">:</span> 00007FF7B12F7F94 v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>Heap<span class="token operator">:</span><span class="token operator">:</span>MaxHeapGrowingFactor<span class="token operator">+</span><span class="token number">9620</span>
 <span class="token number">7</span><span class="token operator">:</span> 00007FF7B12F645B v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>Heap<span class="token operator">:</span><span class="token operator">:</span>MaxHeapGrowingFactor<span class="token operator">+</span><span class="token number">2651</span>
 <span class="token number">8</span><span class="token operator">:</span> 00007FF7B14202BB v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>Factory<span class="token operator">:</span><span class="token operator">:</span>AllocateRawWithImmortalMap<span class="token operator">+</span><span class="token number">59</span>
 <span class="token number">9</span><span class="token operator">:</span> 00007FF7B1422D6D v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>Factory<span class="token operator">:</span><span class="token operator">:</span>NewRawTwoByteString<span class="token operator">+</span><span class="token number">77</span>
<span class="token number">10</span><span class="token operator">:</span> 00007FF7B116DDA8 v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>Smi<span class="token operator">:</span><span class="token operator">:</span>SmiPrint<span class="token operator">+</span><span class="token number">536</span>
<span class="token number">11</span><span class="token operator">:</span> 00007FF7B1104EAB v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>StringHasher<span class="token operator">:</span><span class="token operator">:</span>UpdateIndex<span class="token operator">+</span><span class="token number">219</span>
<span class="token number">12</span><span class="token operator">:</span> 00007FF7B112A2C6 v8<span class="token operator">:</span><span class="token operator">:</span>String<span class="token operator">:</span><span class="token operator">:</span>Utf8Length<span class="token operator">+</span><span class="token number">22</span>
<span class="token number">13</span><span class="token operator">:</span> 00007FF7B0DE07AC node<span class="token operator">:</span><span class="token operator">:</span>Buffer<span class="token operator">:</span><span class="token operator">:</span>New<span class="token operator">+</span><span class="token number">4332</span>
<span class="token number">14</span><span class="token operator">:</span> 00007FF7B1324382 std<span class="token operator">:</span><span class="token operator">:</span>vector<span class="token operator">&lt;</span>v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>compiler<span class="token operator">:</span><span class="token operator">:</span>MoveOperands <span class="token operator">*</span> __ptr64<span class="token punctuation">,</span><span class="token literal-property property">v8</span><span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>ZoneAllocator<span class="token operator">&lt;</span>v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>compiler<span class="token operator">:</span><span class="token operator">:</span>MoveOperands <span class="token operator">*</span> __ptr64<span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token operator">:</span><span class="token operator">:</span>_Umove<span class="token operator">+</span><span class="token number">79442</span>
<span class="token number">15</span><span class="token operator">:</span> 00007FF7B132580D std<span class="token operator">:</span><span class="token operator">:</span>vector<span class="token operator">&lt;</span>v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>compiler<span class="token operator">:</span><span class="token operator">:</span>MoveOperands <span class="token operator">*</span> __ptr64<span class="token punctuation">,</span><span class="token literal-property property">v8</span><span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>ZoneAllocator<span class="token operator">&lt;</span>v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>compiler<span class="token operator">:</span><span class="token operator">:</span>MoveOperands <span class="token operator">*</span> __ptr64<span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token operator">:</span><span class="token operator">:</span>_Umove<span class="token operator">+</span><span class="token number">84701</span>
<span class="token number">16</span><span class="token operator">:</span> 00007FF7B1324866 std<span class="token operator">:</span><span class="token operator">:</span>vector<span class="token operator">&lt;</span>v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>compiler<span class="token operator">:</span><span class="token operator">:</span>MoveOperands <span class="token operator">*</span> __ptr64<span class="token punctuation">,</span><span class="token literal-property property">v8</span><span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>ZoneAllocator<span class="token operator">&lt;</span>v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>compiler<span class="token operator">:</span><span class="token operator">:</span>MoveOperands <span class="token operator">*</span> __ptr64<span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token operator">:</span><span class="token operator">:</span>_Umove<span class="token operator">+</span><span class="token number">80694</span>
<span class="token number">17</span><span class="token operator">:</span> 00007FF7B132474B std<span class="token operator">:</span><span class="token operator">:</span>vector<span class="token operator">&lt;</span>v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>compiler<span class="token operator">:</span><span class="token operator">:</span>MoveOperands <span class="token operator">*</span> __ptr64<span class="token punctuation">,</span><span class="token literal-property property">v8</span><span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>ZoneAllocator<span class="token operator">&lt;</span>v8<span class="token operator">:</span><span class="token operator">:</span>internal<span class="token operator">:</span><span class="token operator">:</span>compiler<span class="token operator">:</span><span class="token operator">:</span>MoveOperands <span class="token operator">*</span> __ptr64<span class="token operator">&gt;</span> <span class="token operator">&gt;</span><span class="token operator">:</span><span class="token operator">:</span>_Umove<span class="token operator">+</span><span class="token number">80411</span>
<span class="token number">18</span><span class="token operator">:</span> 0000011C9175C5C1

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>在代码热更新出现上述问题时，可以使用一个解除限制内存的插件 <code>increase-memory-limit</code></p> <ul><li>安装插件：<code>yarn add increase-memory-limit</code></li> <li>配置运行语句，在<code>package.json</code>添加一个<code>script</code>指令：<code>npm run adjust-mermory-limit</code></li></ul> <h2 id="项目安装依赖时候常见问题以及解决思路"><a href="#项目安装依赖时候常见问题以及解决思路" class="header-anchor">#</a> 项目安装依赖时候常见问题以及解决思路</h2> <h3 id="由于国内外环境因素-导致npm包下载不完整或者出错中断"><a href="#由于国内外环境因素-导致npm包下载不完整或者出错中断" class="header-anchor">#</a> 由于国内外环境因素，导致npm包下载不完整或者出错中断</h3> <p>可以通过修改npm包的镜像源的方式，加速依赖包下载的速度，来避免这种问题</p> <p><strong>npm设置源</strong></p> <ul><li>查看源 npm get registry</li> <li>设置淘宝源 npm config set registry http://registry.npm.taobao.org/</li> <li>切换默认源 npm config set registry https://registry.npmjs.org/</li></ul> <p><strong>yarn设置源</strong></p> <ul><li>查看源 yarn config get registry</li> <li>设置淘宝源 yarn config set registry http://registry.npm.taobao.org/</li> <li>切换默认源 yarn config set registry https://registry.yarnpkg.com</li></ul> <h3 id="由于node版本和node-sass版本不匹配导致出错中断"><a href="#由于node版本和node-sass版本不匹配导致出错中断" class="header-anchor">#</a> 由于node版本和node.sass版本不匹配导致出错中断</h3> <p>对照上文中<code>node版本与node-sass版本兼容</code>解决</p> <h3 id="项目其他人安装依赖都正常-到你安装依赖时出错"><a href="#项目其他人安装依赖都正常-到你安装依赖时出错" class="header-anchor">#</a> 项目其他人安装依赖都正常，到你安装依赖时出错</h3> <p>其他人安装依赖都没啥问题，就你安装出错，检查node版本也没啥问题，这个时候你就开始有点莫名其妙了，到这里了先不要慌，三种方案帮你解决。</p> <p><strong>方案一.删除node modules文件</strong></p> <p>删除node modules的两种方式</p> <blockquote><p>直接手动删除项目下的node_modules文件夹（缺点：依赖包多时删除很慢）</p></blockquote> <blockquote><p>安装rimraf插件删除</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code># 全局安装命令
npm install -g rimraf

# 执行删除依赖包的命令(删除时需要在node_modules目录下运行命令)
rimraf node_modules
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>方案二.清除npm缓存caches文件</strong></p> <p>清除缓存的两种方式</p> <blockquote><p>直接手动删除缓存文件，删除C:\Users\用户名.npmrc 这个文件。</p></blockquote> <blockquote><p>命令删除</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm命令: npm cache clean --force 
yarn命令: yarn cache clean --force
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>方案三.修改配置</strong></p> <p>将<code>yarn</code>配置中的<code>strict-ssl设置为flase</code>  , 在<code>info yarn config</code>信息中，<code>strict- ssl</code>为<code>true</code>,表示需要验证<code>HTTPS</code>证书。我们可以将<code>strict-ssl设置为false</code>,跳过<code>HTTPS</code>证书验证。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yarn config set &quot;strict-ssl&quot; false -g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="error-commander-11-1-0-the-engine-node-is-incompatible-with-this-module"><a href="#error-commander-11-1-0-the-engine-node-is-incompatible-with-this-module" class="header-anchor">#</a> error commander@11.1.0: The engine &quot;node&quot; is incompatible with this module</h3> <p>完整的报错情况如下：
<img src="/blog/assets/img/install-error.21139754.jpg" style="height:100%;width:100%;"></p> <ol><li><p>到这里我们可以根据提示选择安装并切换<code>&gt;=16版本的node</code>来解决这个问题。</p></li> <li><p>由于我这个项目的<code>&quot;node-sass&quot;: &quot;4.14.1&quot;</code>必须匹配14版本的node,（先再16+版本忽略node-sass,安装成功后，再切换智14+版本安装node-sass的方式已经尝试过，报相同的错），到这里，我们可以通过以下命令来忽略错误</p></li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>yarn config set ignore-engines true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>错误忽略成功后，再<code>yarn install</code>安装依赖就可以了</p> <h2 id="网站测试环境首页加载正常-发布到线上加载很慢或者加载不出首页"><a href="#网站测试环境首页加载正常-发布到线上加载很慢或者加载不出首页" class="header-anchor">#</a> 网站测试环境首页加载正常，发布到线上加载很慢或者加载不出首页</h2> <p>场景：有一天销售小姐姐突然跑过来跟我反馈，我们系统的首页加载好慢好慢，要十秒左右才能加载完成。</p> <p>问题排查：第一步查看首页资源请求，是那个资源响应时间需要这么长时间（之前都是好好的，不可能无缘无故突然就变慢了），然后不看不知道一看吓一跳，居然是前几天更新的内容<code>three.js</code>包卡卡住了，</p> <ol><li>如果是测试环境是内网，加载稍微快一点是正常的，可以尽量压缩系统引入的图片和首页不需要的资源。</li> <li>F12调开控制台，查看页面请求总资源是否和nginx内配置的client <code>max body size 50m;</code>页面请求最大总资源匹配，如果不匹配需要修改。</li></ol> <img src="/blog/assets/img/页面加载资源.c09df055.png" style="width:100%;"> <h2 id="研发中node-modules依赖包越来越大"><a href="#研发中node-modules依赖包越来越大" class="header-anchor">#</a> 研发中node_modules依赖包越来越大</h2> <p>之前没有感觉，直到一次，我的磁盘突然变红了，我很奇怪，这个工作盘都没多少东西啊，怎么突然就慢了，结果一分析，项目中的依赖包居然达到了<code>20+G</code>让我很吃惊，这是怎么回事呢？不懂咱就百度传送门：[https://zhuanlan.zhihu.com/p/646026688]，发现前端项目在每次启动的时候，都会去执行在<code>node_modules</code>中累计<code>.cache</code></p> <p>找到问题了，咱就看怎么解决吧，</p> <h3 id="方案一-修改配置-让cache不做累计"><a href="#方案一-修改配置-让cache不做累计" class="header-anchor">#</a> 方案一：修改配置-让cache不做累计</h3> <p>在项目中修改加载器的配置<code>compression-webpack-plugin</code>,设置<code>cache</code>的属性值为<code>false</code>(<code>cache</code>的属性值默认为<code>true</code>)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> CompressionWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'compression-webpack-plugin'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">configureWebpack</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 压缩文件</span>
          <span class="token keyword">new</span> <span class="token class-name">CompressionWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="方案二-修改配置-启动项目时删除cache"><a href="#方案二-修改配置-启动项目时删除cache" class="header-anchor">#</a> 方案二：修改配置-启动项目时删除cache</h3> <p>在项目每次允许时先删<code>.cache</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 在vue.config.js文件</span>
<span class="token keyword">const</span> rm <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'rimraf'</span><span class="token punctuation">)</span>  <span class="token comment">// 全局安装rimraf  yarn add rimraf -g -D</span>

<span class="token function">rm</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>_dirname<span class="token punctuation">,</span> <span class="token string">'node_modules/cache'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="方案三-切换管理工具"><a href="#方案三-切换管理工具" class="header-anchor">#</a> 方案三：切换管理工具</h3> <p>大致了解了一下，现目前推荐的有两种<code>yarn3和pnmp</code>,首推<code>yarn3</code></p> <h2 id="https访问http资源出错"><a href="#https访问http资源出错" class="header-anchor">#</a> https访问http资源出错</h2> <p>话不多说，咱们直接上解决方法</p> <h3 id="_1-通过nginx代理"><a href="#_1-通过nginx代理" class="header-anchor">#</a> 1.通过nginx代理</h3> <p>在通过配置nginx，将代理转发的地址改为http</p> <h3 id="_2-将访问出错的资源-放在本地。"><a href="#_2-将访问出错的资源-放在本地。" class="header-anchor">#</a> 2.将访问出错的资源，放在本地。</h3> <h2 id="接口访问带上路由"><a href="#接口访问带上路由" class="header-anchor">#</a> 接口访问带上路由</h2> <p>正常运行的项目，在实现文件上传时，发现调用接口中有路由地址，如图</p> <p><strong>正常情况</strong></p> <ul><li>代码</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 上传接口地址</span>
<span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api//file-view/file/upload</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>图片</li></ul> <img src="/blog/assets/img/访问正常.42468c40.jpg" style="height:100%;width:100%;"> <p><strong>异常情况</strong></p> <ul><li>代码</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 上传接口地址</span>
<span class="token literal-property property">action</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">api//file-view/file/upload</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><img src="/blog/assets/img/访问出错.6dbddcfb.jpg" style="height:100%;width:100%;"> <p>在做图片上传或者下载，做内联接口时一定要注意<code>&lt;Upload :action=&quot;action&quot; :max-size=&quot;2048&quot; :format=&quot;['jpg','jpeg','png','pdf']&quot; /&gt;</code></p> <h2 id="aes加密解密"><a href="#aes加密解密" class="header-anchor">#</a> AES加密解密</h2> <p>AES加密:是一种使用密钥加密的算法，叫做对称加密方式</p> <p>先引入<code>CryptoJS</code>插件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>yarn add crypto-js
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用方法如下，密钥一定得事先和后端核对清楚，密钥对不上解不开密码。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">let</span> userName <span class="token operator">=</span> <span class="token string">'小明'</span>
  <span class="token keyword">let</span> passWord <span class="token operator">=</span> <span class="token string">'123456'</span>
  <span class="token comment">// 账号加密</span>
  <span class="token keyword">let</span> userNameEncrypt <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">aesEncryp</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span>
  <span class="token keyword">let</span> passWordEncrypt <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">aesEncrypt</span><span class="token punctuation">(</span>passWord<span class="token punctuation">)</span>
  <span class="token comment">// 账号解密</span>
  <span class="token keyword">let</span> userNameDecrypt <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">aesDecrypt</span><span class="token punctuation">(</span>userNameEncrypt<span class="token punctuation">)</span>
  <span class="token keyword">let</span> passWordDecrypt <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">aesDecrypt</span><span class="token punctuation">(</span>passWordEncrypt<span class="token punctuation">)</span>

  <span class="token comment">// AES加密</span>
  <span class="token function">aesEncrypt</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 密钥</span>
      <span class="token keyword">let</span> key <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;1093fd28138912a4176cd513ed1be114&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 密钥：一个常量，前后端协定后一个字符串即可</span>
      <span class="token keyword">let</span> iv <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;0543456789NVCDMN&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 偏移量：一个常量，前后端协定后一个字符串，前后端一致即可</span>
      <span class="token comment">// 加密</span>
      <span class="token keyword">let</span> srcs <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// 需要加密的明文</span>
      <span class="token keyword">let</span> encrypted <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span><span class="token constant">AES</span><span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>srcs<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">iv</span><span class="token operator">:</span> iv<span class="token punctuation">,</span>
          <span class="token literal-property property">mode</span><span class="token operator">:</span> CryptoJS<span class="token punctuation">.</span>mode<span class="token punctuation">.</span><span class="token constant">CBC</span><span class="token punctuation">,</span> <span class="token comment">// mode 与后台一致。有多个模式可选 CBC/ECB</span>
          <span class="token literal-property property">padding</span><span class="token operator">:</span> CryptoJS<span class="token punctuation">.</span>pad<span class="token punctuation">.</span>Pkcs7<span class="token punctuation">,</span> <span class="token comment">//</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token comment">// 需要返回base64格式的加密结果，使用此句</span>
      <span class="token comment">// return CryptoJS.enc.Base64.stringify(encrypted.ciphertext)</span>

      <span class="token comment">// 需要返回hex格式的加密结果，使用此句</span>
      <span class="token keyword">return</span> encrypted<span class="token punctuation">.</span>ciphertext<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// AES解密</span>
  <span class="token function">aesDecrypt</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 密钥</span>
      <span class="token keyword">let</span> key <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;1093fd28138912a4176cd513ed1be114&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 密钥：一个常量，前后端协定后一个字符串即可</span>
      <span class="token keyword">let</span> iv <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&quot;0543456789NVCDMN&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 偏移量：一个常量，前后端协定后一个字符串，前后端一致即可</span>
      <span class="token comment">// 解密</span>
      <span class="token comment">// 需要返回base64格式的加密结果，使用此句</span>
      <span class="token comment">// let encryptedHexStr = CryptoJS.enc.Base64.parse(str)</span>

      <span class="token comment">// 需要返回hex格式的加密结果，使用此句</span>
      <span class="token keyword">let</span> encryptedHexStr <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Hex<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
      <span class="token keyword">let</span> srcs <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Base64<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>encryptedHexStr<span class="token punctuation">)</span>
      <span class="token keyword">let</span> encrypted <span class="token operator">=</span> CryptoJS<span class="token punctuation">.</span><span class="token constant">AES</span><span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>srcs<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">iv</span><span class="token operator">:</span> iv<span class="token punctuation">,</span>
          <span class="token literal-property property">mode</span><span class="token operator">:</span> CryptoJS<span class="token punctuation">.</span>mode<span class="token punctuation">.</span><span class="token constant">CBC</span><span class="token punctuation">,</span> <span class="token comment">// mode 与后台一致。有多个模式可选 CBC/ECB</span>
          <span class="token literal-property property">padding</span><span class="token operator">:</span> CryptoJS<span class="token punctuation">.</span>pad<span class="token punctuation">.</span>Pkcs7<span class="token punctuation">,</span> <span class="token comment">//</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> encrypted<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>CryptoJS<span class="token punctuation">.</span>enc<span class="token punctuation">.</span>Utf8<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/article/Other/Interview.html" class="prev">
        问题总结
      </a></span> <span class="next"><a href="/blog/article/Other/OnlinePayment.html">
        在线支付
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.beaadab2.js" defer></script><script src="/blog/assets/js/2.cdb3e9a2.js" defer></script><script src="/blog/assets/js/1.2ff590fb.js" defer></script><script src="/blog/assets/js/17.48fb250a.js" defer></script>
  </body>
</html>
